<footer>
	<p>&copy; {{ now.Year }} <a href="{{ .Site.BaseURL }}"><b>{{ if .Site.Copyright }}{{ .Site.Copyright }}{{ else }}{{ .Site.Title }}{{ end }}</b></a>.
		{{- range .Site.Menus.footer }}
		<a href="{{ .URL }}"><b>{{ .Name }}</b></a>.
		{{- end }}
	</p>
</footer>

{{ $env := cond .Site.IsServer "\"development\"" "\"production\"" }}
{{ $opts := dict "defines" (dict "process.env.NODE_ENV" $env) }}
{{ $js := resources.Get "js/index.ts" | babel | js.Build $opts }}
<script src="{{ $js.RelPermalink }}"></script>

{{ $serviceWorker := resources.Get "js/auth/authServiceWorker.ts" | babel | js.Build (dict "targetPath" "/authServiceWorker.js") }}

<script>
	// Register auth service worker
	if ('serviceWorker' in navigator) {
		window.addEventListener('load', function() {
			navigator.serviceWorker.register('{{ $serviceWorker.RelPermalink }}', {scope: '/'}).then(function(_registration) {
				console.log('ServiceWorker registration successful!')
			}, function(err) {
				console.log('ServiceWorker registration failed: ', err);
			})
		})
	}
</script>
